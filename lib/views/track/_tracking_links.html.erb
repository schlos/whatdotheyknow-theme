<% if @user
        existing_track = TrackThing.find_by_existing_track(@user, track_thing)
   end %>

<% if own_request %>
<% elsif existing_track %>
  <% if location == 'request_show_end' %>
    <%= link_to _("You currently receive copies of new messages as they arrive. <strong>Unsubscribe</strong>"), track_unsubscribe_path(existing_track, request) %>
  <% else %>
    <%= link_to _("Unsubscribe"), track_unsubscribe_path(existing_track, request), {:class => "request-interactions-getupdates"}  %>
  <% end %>
<% elsif track_thing %>
  <% if location == 'request_show_end' %>
    <% if @user %>
      <%= link_to _("Want to know what happens next? <strong>Get copies of new messages as they arrive.</strong>"), do_track_path(track_thing) %>
    <% else %>
       <%= link_to _("Want to know what happens next? <strong>Sign up to receive copies of new messages as they arrive.</strong>"), do_track_path(track_thing) %>
    <% end %>
  <% elsif location == 'request_list' %>
      <%= link_to _("Get alerts on this search"), do_track_path(track_thing), {:class => "request-interactions-getupdates"} %>
  <% else %>
    <%= link_to _("Get updates"), do_track_path(track_thing), {:class => "request-interactions-getupdates"} %>
  <% end %>
<% end %>
